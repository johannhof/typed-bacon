// Generated by CoffeeScript 1.9.2
(function() {
  var Bacon, Type, _Array, _Object, deepIsType, init,
    hasProp = {}.hasOwnProperty,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  Type = (function() {
    function Type() {
      this.alternatives = [];
    }

    Type.prototype.or = function(type) {
      this.alternatives.push(type);
      return this;
    };

    Type.prototype.isType = function(val) {
      var i, len, ref, type;
      ref = this.alternatives;
      for (i = 0, len = ref.length; i < len; i++) {
        type = ref[i];
        if (type.isType(val)) {
          return true;
        }
      }
      return false;
    };

    return Type;

  })();

  deepIsType = function(proto, comp) {
    var key, val;
    for (key in proto) {
      if (!hasProp.call(proto, key)) continue;
      val = proto[key];
      if (val.isType) {
        if (!val.isType(comp[key])) {
          return false;
        }
      } else if (typeof val === "object") {
        if (!deepIsType(val, comp[key])) {
          return false;
        }
      } else {
        return false;
      }
    }
    return true;
  };

  _Object = (function(superClass) {
    extend(_Object, superClass);

    _Object.description = "object";

    _Object.isType = function(val) {
      return Object.prototype.toString.call(val) === "[object Object]";
    };

    _Object.prototype.isType = function(val) {
      if (_Object.__super__.isType.call(this, val)) {
        return true;
      }
      if (!_Object.isType(val)) {
        return false;
      }
      return deepIsType(this.proto, val);
    };

    function _Object(proto) {
      if (proto == null) {
        proto = {};
      }
      if (!(this instanceof _Object)) {
        return new _Object(proto);
      }
      _Object.__super__.constructor.call(this);
      this.proto = proto;
    }

    return _Object;

  })(Type);

  _Array = (function(superClass) {
    extend(_Array, superClass);

    _Array.description = "array";

    _Array.isType = function(val) {
      return Object.prototype.toString.call(val) === "[object Array]";
    };

    _Array.prototype.isType = function(val) {
      if (_Array.__super__.isType.call(this, val)) {
        return true;
      }
      if (!_Array.isType(val)) {
        return false;
      }
      if ((this.options.length != null) && val.length !== this.options.length) {
        return false;
      }
      return true;
    };

    function _Array(options) {
      if (options == null) {
        options = {};
      }
      if (!(this instanceof _Array)) {
        return new _Array(options);
      }
      _Array.__super__.constructor.call(this);
      this.options = options;
    }

    return _Array;

  })(Type);

  init = function(Bacon) {
    var Existy, Null, _Boolean, _Function, _Number, _String;
    Bacon.Observable.prototype.typeFilter = function(type) {
      var filter, res;
      filter = this.filter(function(val) {
        return type.isType(val);
      });
      return res = filter.withDescription(this, "typeFilter", type);
    };
    Bacon.Observable.prototype.typeCheck = function(type) {
      var map, res;
      map = this.flatMap(function(val) {
        if (type.isType(val)) {
          return val;
        }
        return new Bacon.Error(new Error("Expected " + val + " to be of type " + type.description + "."));
      });
      return res = map.withDescription(this, "typeCheck", type);
    };
    return {
      Types: {
        Existy: Existy = (function(superClass) {
          extend(Existy, superClass);

          Existy.description = "existy";

          Existy.isType = function(val) {
            return val != null;
          };

          function Existy() {
            if (!(this instanceof Existy)) {
              return new Existy();
            }
            Existy.__super__.constructor.call(this);
          }

          return Existy;

        })(Type),
        Null: Null = (function(superClass) {
          extend(Null, superClass);

          Null.description = "null";

          Null.isType = function(val) {
            return val === null;
          };

          function Null() {
            if (!(this instanceof Null)) {
              return new Null();
            }
            Null.__super__.constructor.call(this);
          }

          return Null;

        })(Type),
        Boolean: _Boolean = (function(superClass) {
          extend(_Boolean, superClass);

          _Boolean.description = "boolean";

          _Boolean.isType = function(val) {
            return typeof val === 'boolean';
          };

          function _Boolean() {
            if (!(this instanceof _Boolean)) {
              return new _Boolean();
            }
            _Boolean.__super__.constructor.call(this);
          }

          return _Boolean;

        })(Type),
        Number: _Number = (function(superClass) {
          extend(_Number, superClass);

          _Number.description = "number";

          _Number.isType = function(val) {
            return typeof val === 'number';
          };

          function _Number() {
            if (!(this instanceof _Number)) {
              return new _Number();
            }
            _Number.__super__.constructor.call(this);
          }

          return _Number;

        })(Type),
        String: _String = (function(superClass) {
          extend(_String, superClass);

          _String.description = "string";

          _String.isType = function(val) {
            return typeof val === 'string';
          };

          function _String() {
            if (!(this instanceof _String)) {
              return new _String();
            }
            _String.__super__.constructor.call(this);
          }

          return _String;

        })(Type),
        Array: _Array,
        Object: _Object,
        Function: _Function = (function(superClass) {
          extend(_Function, superClass);

          _Function.description = "function";

          _Function.isType = function(val) {
            return typeof val === 'function';
          };

          function _Function() {
            if (!(this instanceof _Function)) {
              return new _Function();
            }
            _Function.__super__.constructor.call(this);
          }

          return _Function;

        })(Type)
      }
    };
  };

  if ((typeof module !== "undefined" && module !== null) && (module.exports != null)) {
    Bacon = require("baconjs");
    module.exports = init(Bacon);
  } else {
    if (typeof define === "function" && define.amd) {
      define(["bacon"], init);
    } else {
      init(this.Bacon);
    }
  }

}).call(this);
